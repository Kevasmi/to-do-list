(()=>{"use strict";function e(){return{tasksBtn:document.querySelector(".tasks"),todayBtn:document.querySelector(".today"),weekBtn:document.querySelector(".week"),projectWrapper:document.querySelector(".project-menu"),projectBtn:document.querySelector(".projects"),dropDownArrow:document.querySelector(".drop-down"),projectList:document.querySelectorAll(".project-list"),tasksContainer:document.querySelector(".tasks-container"),activeTasksContainer:document.querySelector(".active-tasks"),newTaskBtn:document.querySelector(".new-task"),modalContainer:document.querySelector(".modal-container"),modalCloseBtn:document.querySelector(".close-btn"),form:document.querySelector("form"),titleInput:document.querySelector("#title"),descInput:document.querySelector("#description"),dateInput:document.querySelector("#due-date"),priorityInput:document.querySelector("#priority"),projectInput:document.querySelector("#project"),submitBtn:document.querySelector("#submit-btn"),taskCloseBtn:document.querySelector(".close-button")}}const t=e();function n(){t.modalContainer.classList.add("show"),document.body.style.pointerEvents="none"}function r(){t.modalContainer.classList.remove("show"),document.body.style.pointerEvents="auto",t.titleInput.value="",t.descInput.value="",t.dateInput.value="",t.priorityInput.value="--Please choose an option--",t.projectInput.value=""}function o(e){const t=document.createElement("div"),n=document.createElement("h3"),r=document.createElement("p"),o=document.createElement("div"),a=document.createElement("p"),c=document.createElement("p"),i=document.createElement("button");return t.classList.add("task","container",`${e.priority}`.toLowerCase()),i.classList.add("close-button"),o.setAttribute("id","date-project-container"),a.classList.add("date"),c.classList.add("project"),n.textContent=e.title,r.textContent=e.description,a.textContent=e.dueDate,c.textContent=e.project,i.innerHTML="&times;",t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(i),o.appendChild(a),o.appendChild(c),i.addEventListener("click",(e=>{const t=Array.from(JSON.parse(localStorage.getItem("tasks"))),n=Array.from(document.querySelectorAll(".task")).indexOf(e.target.parentNode);t.splice(n,1),localStorage.setItem("tasks",JSON.stringify(t)),e.target.parentNode.remove()})),t}function a(e){const t=document.createElement("h3"),n=document.createElement("div");return n.classList.add("project-list"),t.textContent=e,n.appendChild(t),n}function c(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function i(e){c(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function s(e){return c(1,arguments),e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function l(e){if(c(1,arguments),!s(e)&&"number"!=typeof e)return!1;var t=i(e);return!isNaN(Number(t))}function u(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}Math.pow(10,8);var d=36e5;function p(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var m={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},f=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,g=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,v=/^([+-])(\d{2})(?::?(\d{2}))?$/;function S(e){var t,n={},r=e.split(m.dateTimeDelimiter);if(r.length>2)return n;if(/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],m.timeZoneDelimiter.test(n.date)&&(n.date=e.split(m.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var o=m.timezone.exec(t);o?(n.time=t.replace(o[1],""),n.timezone=o[1]):n.time=t}return n}function y(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var o=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:null===a?o:100*a,restDateString:e.slice((r[1]||r[2]).length)}}function h(e,t){if(null===t)return new Date(NaN);var n=e.match(f);if(!n)return new Date(NaN);var r=!!n[4],o=w(n[1]),a=w(n[2])-1,c=w(n[3]),i=w(n[4]),s=w(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,i,s)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var o=7*(t-1)+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+o),r}(t,i,s):new Date(NaN);var l=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(k[t]||(j(e)?29:28))}(t,a,c)&&function(e,t){return t>=1&&t<=(j(e)?366:365)}(t,o)?(l.setUTCFullYear(t,a,Math.max(o,c)),l):new Date(NaN)}function w(e){return e?parseInt(e):1}function N(e){var t=e.match(g);if(!t)return NaN;var n=D(t[1]),r=D(t[2]),o=D(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,o)?n*d+6e4*r+1e3*o:NaN}function D(e){return e&&parseFloat(e.replace(",","."))||0}function C(e){if("Z"===e)return 0;var t=e.match(v);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,o)?n*(r*d+6e4*o):NaN}var k=[31,null,31,30,31,30,31,31,30,31,30,31];function j(e){return e%400==0||e%4==0&&e%100!=0}function b(e,t){c(1,arguments);var n=t||{},r=n.locale,o=r&&r.options&&r.options.weekStartsOn,a=null==o?0:p(o),s=null==n.weekStartsOn?a:p(n.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=i(e),u=l.getDay(),d=(u<s?7:0)+u-s;return l.setDate(l.getDate()-d),l.setHours(0,0,0,0),l}function I(e,t,n){c(2,arguments);var r=b(e,n),o=b(t,n);return r.getTime()===o.getTime()}function E(){const t=e();let s=JSON.parse(localStorage.getItem("projectList")),d=JSON.parse(localStorage.getItem("tasks"));t.tasksBtn.addEventListener("click",(()=>{const e=document.querySelectorAll(".task");for(const t of e)t.remove();d.forEach((e=>{const n=o(e);t.activeTasksContainer.appendChild(n)}))})),t.todayBtn.addEventListener("click",(()=>{const e=document.querySelectorAll(".task");for(const t of e)t.remove();const n=d.filter((e=>e.dueDate==function(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var n=i(e);if(!l(n))throw new RangeError("Invalid time value");var r=t||{},o=null==r.format?"extended":String(r.format),a=null==r.representation?"complete":String(r.representation);if("extended"!==o&&"basic"!==o)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==a&&"time"!==a&&"complete"!==a)throw new RangeError("representation must be 'date', 'time', or 'complete'");var c="",s="extended"===o?"-":"",d="extended"===o?":":"";if("time"!==a){var p=u(n.getDate(),2),m=u(n.getMonth()+1,2),f=u(n.getFullYear(),4);c="".concat(f).concat(s).concat(m).concat(s).concat(p)}if("date"!==a){var g=u(n.getHours(),2),v=u(n.getMinutes(),2),S=u(n.getSeconds(),2),y=""===c?"":" ";c="".concat(c).concat(y).concat(g).concat(d).concat(v).concat(d).concat(S)}return c}(new Date,{representation:"date"})));n.forEach((e=>{const n=o(e);t.activeTasksContainer.appendChild(n)}))})),t.weekBtn.addEventListener("click",(()=>{const e=document.querySelectorAll(".task");for(const t of e)t.remove();d.forEach((e=>e.dueDateISO=function(e,t){c(1,arguments);var n=t||{},r=null==n.additionalDigits?2:p(n.additionalDigits);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var o,a=S(e);if(a.date){var i=y(a.date,r);o=h(i.restDateString,i.year)}if(!o||isNaN(o.getTime()))return new Date(NaN);var s,l=o.getTime(),u=0;if(a.time&&(u=N(a.time),isNaN(u)))return new Date(NaN);if(!a.timezone){var d=new Date(l+u),m=new Date(0);return m.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),m.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),m}return s=C(a.timezone),isNaN(s)?new Date(NaN):new Date(l+u+s)}(e.dueDate)));let n=d.filter((e=>function(e,t){return c(1,arguments),I(e,Date.now(),t)}(e.dueDateISO)));n.forEach((e=>{const n=o(e);t.activeTasksContainer.appendChild(n)}))})),t.projectBtn.addEventListener("click",(()=>{t.dropDownArrow.classList.toggle("rotate");const e=document.querySelectorAll(".project-list");console.log(e),0==e.length&&s.forEach((e=>{const n=a(e);t.projectWrapper.appendChild(n),console.log(e)})),e.forEach((e=>e.remove()))})),t.newTaskBtn.addEventListener("click",(()=>{n()})),t.modalCloseBtn.addEventListener("click",(()=>{r()})),t.form.addEventListener("submit",(t=>{t.preventDefault(),function(){const t=e(),n=t.titleInput.value,c=t.descInput.value,i=t.dateInput.value,s=t.priorityInput.value,l=t.projectInput.value,u=function(e,t,n,r,a){let c=localStorage.getItem("tasks"),i=c?JSON.parse(c):[],s=localStorage.getItem("projectList"),l=s?JSON.parse(s):[];const u={title:e,description:t,dueDate:n,priority:r,project:null!=a?a:"none"};i.push(u),l.some((e=>e==u.project))||l.push(u.project);const d=o(u);return localStorage.setItem("tasks",JSON.stringify(i)),localStorage.setItem("projectList",JSON.stringify(l)),d}(n,c,i,s,l);t.activeTasksContainer.appendChild(u);const d=a(l),p=Array.from(t.projectList);if(0==p.length)t.projectWrapper.appendChild(d);else{const e=e=>e.textContent==d.textContent;p.some(e)||t.projectWrapper.appendChild(d)}r()}()}))}!function(){const t=e();if(null===localStorage.getItem("tasks")){let e=[];localStorage.setItem("tasks",JSON.stringify(e))}else JSON.parse(localStorage.getItem("tasks")).forEach((e=>{const n=o(e);t.activeTasksContainer.appendChild(n)}));if(null===localStorage.getItem("projectList")){let e=[];localStorage.setItem("projectList",JSON.stringify(e))}E()}()})();