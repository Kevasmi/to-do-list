(()=>{"use strict";function e(){return{tasksBtn:document.querySelector(".tasks"),todayBtn:document.querySelector(".today"),weekBtn:document.querySelector(".week"),projectWrapper:document.querySelector(".project-menu"),projectBtn:document.querySelector(".projects"),dropDownArrow:document.querySelector(".drop-down"),tasksContainer:document.querySelector(".tasks-container"),activeTasksContainer:document.querySelector(".active-tasks"),newTaskBtn:document.querySelector(".new-task"),modalContainer:document.querySelector(".modal-container"),modalCloseBtn:document.querySelector(".close-btn"),form:document.querySelector("form"),titleInput:document.querySelector("#title"),descInput:document.querySelector("#description"),dateInput:document.querySelector("#due-date"),priorityInput:document.querySelector("#priority"),projectInput:document.querySelector("#project"),submitBtn:document.querySelector("#submit-btn"),taskCloseBtn:document.querySelector(".close-button")}}const t=e();function n(){t.modalContainer.classList.add("show"),document.body.style.pointerEvents="none"}function r(){t.modalContainer.classList.remove("show"),document.body.style.pointerEvents="auto",t.titleInput.value="",t.descInput.value="",t.dateInput.value="",t.priorityInput.value="--Please choose an option--",t.projectInput.value=""}function o(e){const t={};return e.forEach((e=>{t[e.project]=(t[e.project]||0)+1})),t}function a(e){const t=document.createElement("div"),n=document.createElement("h3"),r=document.createElement("p"),o=document.createElement("div"),a=document.createElement("p"),c=document.createElement("p"),l=document.createElement("button");return t.classList.add("task","container",`${e.priority}`.toLowerCase()),l.classList.add("close-button"),o.setAttribute("id","date-project-container"),a.classList.add("date"),c.classList.add("project"),n.textContent=e.title,r.textContent=e.description,a.textContent=e.dueDate,c.textContent=e.project,l.innerHTML="&times;",t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(l),o.appendChild(a),o.appendChild(c),l.addEventListener("click",(e=>{!function(e){let t=JSON.parse(localStorage.getItem("projectCount"));const n=e.target.parentNode.querySelector(".project").textContent,r=document.querySelectorAll(".project-list");t=function(e,t){for(const n in t)n==e&&(t[n]=t[n]-1);return t}(n,t),localStorage.setItem("projectCount",JSON.stringify(t)),t[n]<=0&&(delete t[n],localStorage.setItem("projectCount",JSON.stringify(t)),console.log(t),r.forEach((e=>{e.textContent==n&&e.remove()})))}(e),function(e){const t=Array.from(JSON.parse(localStorage.getItem("tasks"))),n=Array.from(document.querySelectorAll(".task")).indexOf(e.target.parentNode);t.splice(n,1),localStorage.setItem("tasks",JSON.stringify(t)),e.target.parentNode.remove()}(e)})),t}function c(e){const t=document.createElement("h3"),n=document.createElement("div");return n.classList.add("project-list"),t.textContent=e,n.appendChild(t),n}function l(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function i(e){l(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function s(e){return l(1,arguments),e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function u(e){if(l(1,arguments),!s(e)&&"number"!=typeof e)return!1;var t=i(e);return!isNaN(Number(t))}function d(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}Math.pow(10,8);var p=36e5;function m(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var f={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},g=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,S=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,v=/^([+-])(\d{2})(?::?(\d{2}))?$/;function y(e){var t,n={},r=e.split(f.dateTimeDelimiter);if(r.length>2)return n;if(/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],f.timeZoneDelimiter.test(n.date)&&(n.date=e.split(f.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var o=f.timezone.exec(t);o?(n.time=t.replace(o[1],""),n.timezone=o[1]):n.time=t}return n}function h(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var o=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:null===a?o:100*a,restDateString:e.slice((r[1]||r[2]).length)}}function N(e,t){if(null===t)return new Date(NaN);var n=e.match(g);if(!n)return new Date(NaN);var r=!!n[4],o=C(n[1]),a=C(n[2])-1,c=C(n[3]),l=C(n[4]),i=C(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,l,i)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var o=7*(t-1)+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+o),r}(t,l,i):new Date(NaN);var s=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(I[t]||(j(e)?29:28))}(t,a,c)&&function(e,t){return t>=1&&t<=(j(e)?366:365)}(t,o)?(s.setUTCFullYear(t,a,Math.max(o,c)),s):new Date(NaN)}function C(e){return e?parseInt(e):1}function w(e){var t=e.match(S);if(!t)return NaN;var n=k(t[1]),r=k(t[2]),o=k(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,o)?n*p+6e4*r+1e3*o:NaN}function k(e){return e&&parseFloat(e.replace(",","."))||0}function D(e){if("Z"===e)return 0;var t=e.match(v);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,o)?n*(r*p+6e4*o):NaN}var I=[31,null,31,30,31,30,31,31,30,31,30,31];function j(e){return e%400==0||e%4==0&&e%100!=0}function E(e,t){l(1,arguments);var n=t||{},r=n.locale,o=r&&r.options&&r.options.weekStartsOn,a=null==o?0:m(o),c=null==n.weekStartsOn?a:m(n.weekStartsOn);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=i(e),u=s.getDay(),d=(u<c?7:0)+u-c;return s.setDate(s.getDate()-d),s.setHours(0,0,0,0),s}function b(e,t,n){l(2,arguments);var r=E(e,n),o=E(t,n);return r.getTime()===o.getTime()}function q(){const t=e();let s=JSON.parse(localStorage.getItem("tasks"));t.tasksBtn.addEventListener("click",(()=>{let e=JSON.parse(localStorage.getItem("tasks"));const n=document.querySelectorAll(".task");for(const e of n)e.remove();e.forEach((e=>{const n=a(e);t.activeTasksContainer.appendChild(n)}))})),t.todayBtn.addEventListener("click",(()=>{let e=JSON.parse(localStorage.getItem("tasks"));const n=document.querySelectorAll(".task");for(const e of n)e.remove();const r=e.filter((e=>e.dueDate==function(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var n=i(e);if(!u(n))throw new RangeError("Invalid time value");var r=t||{},o=null==r.format?"extended":String(r.format),a=null==r.representation?"complete":String(r.representation);if("extended"!==o&&"basic"!==o)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==a&&"time"!==a&&"complete"!==a)throw new RangeError("representation must be 'date', 'time', or 'complete'");var c="",l="extended"===o?"-":"",s="extended"===o?":":"";if("time"!==a){var p=d(n.getDate(),2),m=d(n.getMonth()+1,2),f=d(n.getFullYear(),4);c="".concat(f).concat(l).concat(m).concat(l).concat(p)}if("date"!==a){var g=d(n.getHours(),2),S=d(n.getMinutes(),2),v=d(n.getSeconds(),2),y=""===c?"":" ";c="".concat(c).concat(y).concat(g).concat(s).concat(S).concat(s).concat(v)}return c}(new Date,{representation:"date"})));r.forEach((e=>{const n=a(e);t.activeTasksContainer.appendChild(n)}))})),t.weekBtn.addEventListener("click",(()=>{const e=document.querySelectorAll(".task");let n=JSON.parse(localStorage.getItem("tasks"));for(const t of e)t.remove();n.forEach((e=>e.dueDateISO=function(e,t){l(1,arguments);var n=t||{},r=null==n.additionalDigits?2:m(n.additionalDigits);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var o,a=y(e);if(a.date){var c=h(a.date,r);o=N(c.restDateString,c.year)}if(!o||isNaN(o.getTime()))return new Date(NaN);var i,s=o.getTime(),u=0;if(a.time&&(u=w(a.time),isNaN(u)))return new Date(NaN);if(!a.timezone){var d=new Date(s+u),p=new Date(0);return p.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),p.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),p}return i=D(a.timezone),isNaN(i)?new Date(NaN):new Date(s+u+i)}(e.dueDate)));let r=n.filter((e=>function(e,t){return l(1,arguments),b(e,Date.now(),t)}(e.dueDateISO)));r.forEach((e=>{const n=a(e);t.activeTasksContainer.appendChild(n)}))})),t.projectBtn.addEventListener("click",(()=>{t.dropDownArrow.classList.toggle("rotate");let e=JSON.parse(localStorage.getItem("projectCount"));if(0===document.querySelectorAll(".project-list").length)for(const n in e){const e=c(n);t.projectWrapper.appendChild(e)}else document.querySelectorAll(".project-list").forEach((e=>e.remove()));const n=document.querySelectorAll(".project-list");void 0!==n&&n.forEach((e=>e.addEventListener("click",(e=>{const n=document.querySelectorAll(".task");for(const e of n)e.remove();s.filter((t=>t.project===e.target.textContent)).forEach((e=>{const n=a(e);t.activeTasksContainer.appendChild(n)}))}))))})),t.newTaskBtn.addEventListener("click",(()=>{n()})),t.modalCloseBtn.addEventListener("click",(()=>{r()})),t.form.addEventListener("submit",(t=>{t.preventDefault(),function(){const t=e();let n=JSON.parse(localStorage.getItem("tasks"));const l=t.titleInput.value,i=t.descInput.value,s=t.dateInput.value,u=t.priorityInput.value,d=t.projectInput.value,p=function(e,t,n,r,c){let l=localStorage.getItem("tasks"),i=l?JSON.parse(l):[],s=localStorage.getItem("projectCount"),u=s?JSON.parse(s):{};const d={title:e,description:t,dueDate:n,priority:r,project:null!=c?c:"none"};i.push(d),u=o(i);const p=a(d);return localStorage.setItem("tasks",JSON.stringify(i)),localStorage.setItem("projectCount",JSON.stringify(u)),p}(l,i,s,u,d);n=JSON.parse(localStorage.getItem("tasks")),t.activeTasksContainer.appendChild(p);const m=c(d);t.projectWrapper.appendChild(m);const f=document.querySelectorAll(".project-list");null!=f&&0!=f.length&&f.forEach((e=>e.addEventListener("click",(e=>{const r=document.querySelectorAll(".task");for(const e of r)e.remove();console.log(n);let o=n.filter((t=>t.project===e.target.textContent));o.forEach((e=>{const n=a(e);t.activeTasksContainer.appendChild(n)}))})))),r()}()}))}!function(){const t=e();let n=[];if(null==localStorage.getItem("tasks")||0==localStorage.getItem("tasks").length?localStorage.setItem("tasks",JSON.stringify(n)):(n=JSON.parse(localStorage.getItem("tasks")),n.forEach((e=>{const n=a(e);t.activeTasksContainer.appendChild(n)}))),null===localStorage.getItem("projectCount")){let e=o(n);console.log(e),localStorage.setItem("projectCount",JSON.stringify(e))}q()}()})();